services:
  - type: web
    name: control-de-venta
    env: python
    plan: free
    rootDir: ./Control_de_Venta
    buildCommand: |
      pip install -r ../requirements.txt
      python ../manage.py collectstatic --noinput
  # Start Gunicorn from the project rootDir (./Control_de_Venta).
  # Use 1 worker and 1 thread to minimise memory usage on Render free plan.
  # Increase timeout to 300s to tolerate slow cold-starts (temporary).
    # Use Daphne (ASGI) to support WebSockets via Django Channels
    startCommand: daphne -b 0.0.0.0 -p $PORT Control_de_Venta.asgi:application
    envVars:
      - key: DJANGO_SETTINGS_MODULE
        value: Control_de_Venta.settings
      # Ensure Python can import the inner project package when commands
      # run with a different working directory during build/start.
      - key: PYTHONPATH
        # Render's project root during deploy is /opt/render/project/src
        value: /opt/render/project/src/Control_de_Venta
      - key: PYTHON_VERSION
        value: 3.13.0
      - key: DEBUG
        value: False
      - key: SECRET_KEY
        sync: false
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_KEY
        sync: false


